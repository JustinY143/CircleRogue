<!DOCTYPE html>
<html>
<head>
    <title>Roguelike Framework</title>
    <style>
        body { margin: 0; overflow: hidden; background: #111; font-family: sans-serif; user-select: none; }
        canvas { display: block; position: absolute; top: 0; left: 0; z-index: 0; }
        
        /* UI OVERLAY */
        #ui-layer { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 10; }
        
        /* SCREENS (Menu, Death, etc.) - Enable pointer events only for these */
        .screen { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.85); 
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            pointer-events: auto; /* Allow clicking buttons */
        }
        
        .hidden { display: none !important; }

        h1 { color: white; font-size: 60px; margin-bottom: 20px; text-transform: uppercase; letter-spacing: 5px; }
        h2 { color: #ccc; margin-bottom: 40px; }
        
        button {
            background: #333; color: white; border: 2px solid #555; padding: 15px 40px; 
            font-size: 24px; cursor: pointer; margin: 10px; transition: 0.2s;
            text-transform: uppercase; font-weight: bold;
        }
        button:hover { background: #555; border-color: #888; transform: scale(1.05); }

        /* HUD (Heads Up Display) */
        #hud { position: absolute; top: 20px; left: 20px; pointer-events: none; }
        .bar-container { width: 250px; height: 25px; background: #333; margin-bottom: 10px; position: relative; border: 2px solid #555; }
        .bar-fill { height: 100%; transition: width 0.2s; }
        .bar-text { position: absolute; top: 0; left: 10px; color: white; line-height: 25px; font-size: 14px; font-weight: bold; text-shadow: 1px 1px 2px black; }

        /* CHARACTER CARDS */
        .char-select-container { display: flex; gap: 20px; }
        .char-card { 
            background: #222; border: 2px solid #444; padding: 20px; 
            text-align: center; cursor: pointer; transition: 0.2s; width: 150px;
        }
        .char-card:hover { background: #333; border-color: white; transform: translateY(-5px); }
        .char-icon { width: 60px; height: 60px; border-radius: 50%; margin: 0 auto 15px; }
		
		.playing-cursor { cursor: none; } /* Hides system cursor when playing */

		/* Small adjustment to make the color picker look better */
		#settings-menu input { margin: 20px; width: 100px; height: 50px; cursor: pointer; }
    </style>
</head>
<body>
    <canvas id="gameCanvas"></canvas>
    
    <div id="ui-layer">
        <div id="hud" class="hidden">
            <div class="bar-container">
                <div id="hp-bar" class="bar-fill" style="background: #ff4444; width: 100%;"></div>
                <span id="hp-text" class="bar-text">10/10 HP</span>
            </div>
            <div class="bar-container">
                <div id="exp-bar" class="bar-fill" style="background: #4488ff; width: 0%;"></div>
                <span id="exp-text" class="bar-text">Lvl 1</span>
            </div>
        </div>

        <div id="main-menu" class="screen">
        <h1>ClusterFuck</h1>
        <button onclick="Game.toCharSelect()">Start Game</button>
        <button onclick="Game.toSettings()" style="font-size: 18px;">Settings</button>
    </div>

    <div id="settings-menu" class="screen hidden">
        <h1>Settings</h1>
        <div style="color: white; font-size: 24px;">
            <label>Crosshair Color</label><br>
            <input type="color" id="crosshairColorPicker" value="#ff69b4" onchange="Game.updateCrosshairColor(this.value)">
        </div>
        <button onclick="Game.toMainMenu()">Back to Menu</button>
    </div>

        <div id="char-select" class="screen hidden">
            <h1>Choose Class</h1>
            <div class="char-select-container">
                <div class="char-card" onclick="Game.start('gunner')">
                    <div class="char-icon" style="background: #D8BFD8;"></div> <h3>Gunner</h3>
                    <p>Ranged<br>Shoots Bullets</p>
                </div>
                <div class="char-card" onclick="Game.start('swordsman')">
                    <div class="char-icon" style="background: #00ff00;"></div> <h3>Swordsman</h3>
                    <p>Melee<br>Wide Slash</p>
                </div>
            </div>
            <button onclick="Game.toMainMenu()" style="margin-top:40px; font-size: 16px;">Back</button>
        </div>

        <div id="game-over" class="screen hidden">
            <h1 style="color: #ff4444;">You Died</h1>
            <h2 id="death-stats">Level Reached: 1</h2>
            <button onclick="Game.toCharSelect()">Retry</button>
            <button onclick="Game.toMainMenu()">Main Menu</button>
        </div>
    </div>

    <script src="utils.js"></script>
    <script src="entities.js"></script>
    <script src="main.js"></script>
</body>
</html>